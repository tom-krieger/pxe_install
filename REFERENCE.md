# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`pxe_install`](#pxe_install): PXE Install server

#### Private Classes

* `pxe_install::apache`: Configure webserver for install server
* `pxe_install::dhcp`: Setup DHCP server
* `pxe_install::params`: Default parameters
* `pxe_install::tftp`: Setup ftp server
* `pxe_install::yum_repos`: Create yum repo files

### Defined types

#### Public Defined types

* [`pxe_installarent_dirs`](#pxe_installarent_dirs): Create directories recursivly

#### Private Defined types

* `pxe_install::kickstart`: Create kickstart file
* `pxe_install::partitioning::debian`: Create a partion table for Debian systems
* `pxe_install::partitioning::redhat`: ACreate partitioning for redhat/CentOPS systems
* `pxe_install::partitioning::ubuntu`: Create a partion table for Ubuntu systems

Create the partion entries for presdeed.
* `pxe_install::tftp::host`: Create a tftp server entry for a host.

### Functions

* [`pxe_install::hex_ip`](#pxe_installhex_ip): Convert a ip from digits into hex.

### Tasks

* [`create_password`](#create_password): Outputs a SHA512 encrypted password for use with node installation.
* [`maintain_centos_netinstaller`](#maintain_centos_netinstaller): Maintain Ubuntu/Debian net installer
* [`maintain_ubuntu_debian_netinstaller`](#maintain_ubuntu_debian_netinstaller): Maintain Ubuntu/Debian net installer

### Plans

* [`pxe_install::add_new_os_netboot`](#pxe_installadd_new_os_netboot): Add a new of to tftpboot directory

## Classes

### <a name="pxe_install"></a>`pxe_install`

Set up an PXE install server with dhcp, tftp and webserver for serving files

#### Examples

##### 

```puppet
include pxe_install
```

#### Parameters

The following parameters are available in the `pxe_install` class:

* [`installserverip`](#installserverip)
* [`installserver`](#installserver)
* [`repo_server`](#repo_server)
* [`repo_server_ip`](#repo_server_ip)
* [`repos_dir`](#repos_dir)
* [`repos_url`](#repos_url)
* [`scriptdir`](#scriptdir)
* [`scripturl`](#scripturl)
* [`kickstart_dir`](#kickstart_dir)
* [`kickstart_url`](#kickstart_url)
* [`puppetmaster`](#puppetmaster)
* [`puppetmasterip`](#puppetmasterip)
* [`debian_mirror`](#debian_mirror)
* [`debian_mirror_dir`](#debian_mirror_dir)
* [`ubuntu_mirror`](#ubuntu_mirror)
* [`ubuntu_mirror_dir`](#ubuntu_mirror_dir)
* [`centos_mirrors`](#centos_mirrors)
* [`services`](#services)
* [`machines`](#machines)
* [`status_allow_from`](#status_allow_from)
* [`enabled`](#enabled)
* [`ssl_cert`](#ssl_cert)
* [`ssl_key`](#ssl_key)
* [`ssl_chain`](#ssl_chain)
* [`ssl_certs_dir`](#ssl_certs_dir)
* [`documentroot`](#documentroot)
* [`create_aliases`](#create_aliases)
* [`configure_repos`](#configure_repos)
* [`sync_repos`](#sync_repos)
* [`configure_sync_scripts`](#configure_sync_scripts)
* [`challenge_password`](#challenge_password)
* [`add_hosts_entries`](#add_hosts_entries)
* [`install_resolv_conf`](#install_resolv_conf)
* [`defaults`](#defaults)

##### <a name="installserverip"></a>`installserverip`

Data type: `String`

The ip of the install server

##### <a name="installserver"></a>`installserver`

Data type: `String`

Hostname of the install server

##### <a name="repo_server"></a>`repo_server`

Data type: `String`

Hostname of the server hosting the package repositories

##### <a name="repo_server_ip"></a>`repo_server_ip`

Data type: `String`

IP of the server hosting the package repositories

##### <a name="repos_dir"></a>`repos_dir`

Data type: `Stdlib::Unixpath`

Directory location of the package repositories

##### <a name="repos_url"></a>`repos_url`

Data type: `String`

URI where the pacjaqges can be found on the repo server

##### <a name="scriptdir"></a>`scriptdir`

Data type: `Stdlib::Unixpath`

Directory location where to cfreate scripts and prepared files

##### <a name="scripturl"></a>`scripturl`

Data type: `String`

URL where to find the scripts

##### <a name="kickstart_dir"></a>`kickstart_dir`

Data type: `Stdlib::Unixpath`

Directory location for the kickstart/preseed files

##### <a name="kickstart_url"></a>`kickstart_url`

Data type: `String`

Url where to download the kickstart/preseed files

##### <a name="puppetmaster"></a>`puppetmaster`

Data type: `Optional[String]`

The hostname of the Puppet master server

Default value: `''`

##### <a name="puppetmasterip"></a>`puppetmasterip`

Data type: `Optional[String]`

The ip of the Puppet master server

Default value: `''`

##### <a name="debian_mirror"></a>`debian_mirror`

Data type: `Optional[String]`

The Debian mirror host

Default value: `''`

##### <a name="debian_mirror_dir"></a>`debian_mirror_dir`

Data type: `Optional[String]`

The uri to use on the Debain mirror.

Default value: `'/debian'`

##### <a name="ubuntu_mirror"></a>`ubuntu_mirror`

Data type: `Optional[String]`

The Ubuntu mirror host

Default value: `''`

##### <a name="ubuntu_mirror_dir"></a>`ubuntu_mirror_dir`

Data type: `Optional[String]`

The uri to use on the Ubuntu mirror.

Default value: `'/ubuntu'`

##### <a name="centos_mirrors"></a>`centos_mirrors`

Data type: `Optional[Hash]`

hash with CentOS mirror hosts and directories

Default value: `{}`

##### <a name="services"></a>`services`

Data type: `Optional[Hash]`

Hash with services to configure. Valid are dhcp and tftp. Each service is a hash of how to configure
that service.

Default value: `{}`

##### <a name="machines"></a>`machines`

Data type: `Optional[Hash]`

Hash with all machines to get installed. Each entry i a whole description of a machine with ips,
partitions and so on.

Default value: `{}`

##### <a name="status_allow_from"></a>`status_allow_from`

Data type: `Optional[Array]`

Allow Apache status URLs from these ips

Default value: `['127.0.0.1']`

##### <a name="enabled"></a>`enabled`

Data type: `Optional[Boolean]`

Installserver is enbaled or not

Default value: ``true``

##### <a name="ssl_cert"></a>`ssl_cert`

Data type: `Optional[String]`

Location of the SSL certificate for the webserver to use. he file has to exist on the install server.

Default value: `'/etc/pki/httpd/repos.example.com/repos.example.com.cer'`

##### <a name="ssl_key"></a>`ssl_key`

Data type: `Optional[String]`

Location of the SSL key for the webserver to use. he file has to exist on the install server.

Default value: `'/etc/pki/httpd/repos.example.com/repos.example.com.key'`

##### <a name="ssl_chain"></a>`ssl_chain`

Data type: `Optional[String]`

Location of the SSL certificate chain for the webserver to use. he file has to exist on the install server.

Default value: `'/etc/pki/httpd/repos.example.com/fullchain.cer'`

##### <a name="ssl_certs_dir"></a>`ssl_certs_dir`

Data type: `Optional[String]`

Directory where all files for the cdertificates reside.

Default value: `'/etc/pki/httpd/repos.example.com/'`

##### <a name="documentroot"></a>`documentroot`

Data type: `Optional[String]`

Document root for the webserver

Default value: `'/var/www/html'`

##### <a name="create_aliases"></a>`create_aliases`

Data type: `Optional[Boolean]`

Create webserver aliases

Default value: ``true``

##### <a name="configure_repos"></a>`configure_repos`

Data type: `Optional[Boolean]`

Configure repositories on install server

Default value: ``true``

##### <a name="sync_repos"></a>`sync_repos`

Data type: `Optional[Hash]`

hash containing all repos to be synced to the internal package repositories.

Default value: `{
    centos7 => true,
    centos8 => true,
    epel7   => true,
    epel8   => true,
  }`

##### <a name="configure_sync_scripts"></a>`configure_sync_scripts`

Data type: `Optional[Boolean]`

If repository sync scripts should be installed and configured.

Default value: ``false``

##### <a name="challenge_password"></a>`challenge_password`

Data type: `Sensitive[String]`

Sensitive challenge password for auto signing cert requests.

##### <a name="add_hosts_entries"></a>`add_hosts_entries`

Data type: `Optional[Boolean]`

Add install server and puppet server to /etc/hosts file.

Default value: ``false``

##### <a name="install_resolv_conf"></a>`install_resolv_conf`

Data type: `Optional[Boolean]`

Install a prepared resolv.conf file on the fresh installed system.

Default value: ``false``

##### <a name="defaults"></a>`defaults`

Data type: `Optional[Hash]`

Default values.

Default value: `$pxe_install::params::defaults`

## Defined types

### <a name="pxe_installarent_dirs"></a>`pxe_installarent_dirs`

Create all missing directories

 }

#### Examples

##### 

```puppet
pxe_installarent_dirs{ 'create script dir':
 dir_path => '/var/www/scripts',
```

#### Parameters

The following parameters are available in the `pxe_installarent_dirs` defined type:

* [`dir_path`](#dir_path)

##### <a name="dir_path"></a>`dir_path`

Data type: `Stdlib::Unixpath`

The directories to be created.

## Functions

### <a name="pxe_installhex_ip"></a>`pxe_install::hex_ip`

Type: Puppet Language

Convert a ip from digits into hex.

#### `pxe_install::hex_ip(String $ip)`

The pxe_install::hex_ip function.

Returns: `String` IP in hey format

##### `ip`

Data type: `String`

The ip to convert, e. g. 10.0.0.1

## Tasks

### <a name="create_password"></a>`create_password`

Outputs a SHA512 encrypted password for use with node installation.

**Supports noop?** false

#### Parameters

##### `password`

Data type: `String[1]`

The password to encrypt

### <a name="maintain_centos_netinstaller"></a>`maintain_centos_netinstaller`

Maintain Ubuntu/Debian net installer

**Supports noop?** false

#### Parameters

##### `tftp_basedir`

Data type: `String`

The base directory of the tftpd server.

##### `archive`

Data type: `String`

The full path and name of the net installer archive.

##### `os`

Data type: `Enum[ubuntu,debian,centos]`

The operating system

##### `os_version`

Data type: `String`

The os version

##### `os_subversion`

Data type: `String`

The os subversion like 'u9'

### <a name="maintain_ubuntu_debian_netinstaller"></a>`maintain_ubuntu_debian_netinstaller`

Maintain Ubuntu/Debian net installer

**Supports noop?** false

#### Parameters

##### `tftp_basedir`

Data type: `String`

The base directory of the tftpd server.

##### `archive`

Data type: `String`

The full path and name of the net installer archive.

##### `os`

Data type: `Enum[ubuntu,debian,centos]`

The operating system

##### `os_version`

Data type: `String`

The os version

## Plans

### <a name="pxe_installadd_new_os_netboot"></a>`pxe_install::add_new_os_netboot`

Upload a net installer source and distribute the files into the tftpboot directory.

#### Parameters

The following parameters are available in the `pxe_install::add_new_os_netboot` plan:

* [`nodes`](#nodes)
* [`os`](#os)
* [`os_version`](#os_version)
* [`netinstaller_file`](#netinstaller_file)
* [`tftp_basedir`](#tftp_basedir)
* [`os_subversion`](#os_subversion)

##### <a name="nodes"></a>`nodes`

Data type: `TargetSpec`

The target nodes

##### <a name="os"></a>`os`

Data type: `Enum['ubuntu', 'debian', 'centos']`

The os to work on

##### <a name="os_version"></a>`os_version`

Data type: `String`

The os version

##### <a name="netinstaller_file"></a>`netinstaller_file`

Data type: `Stdlib::Absolutepath`

The path to the net installer archive

##### <a name="tftp_basedir"></a>`tftp_basedir`

Data type: `Stdlib::Absolutepath`

The base directory on the tftp server to install to

Default value: `'/var/lib/tftpboot'`

##### <a name="os_subversion"></a>`os_subversion`

Data type: `Optional[String]`

This parameter in needed for CentOS and Redhat. You can give a subversion line "u3".

Default value: `''`

